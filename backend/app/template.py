adversity_template = """あなたは人間の行動と失敗の分析の専門家です。
ユーザーが入力した失敗事例について、以下の質問に短く答えてください。
その際、出力結果をもとにユーザーが後続の文章を補完できるよう、状況を細分化した具体的な要素候補を提示するようにしてください。
例えば、入力が「ボクシングの試合で負けた」の場合は、「相手の攻撃」「リングの状況」「ラウンド数」「セコンドのアドバイス」などの要素を含めるとよいです。
入力は、上記の例に限らないので、一例として参考にし汎用性の高い出力を心がけてください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【質問】
1. どこで起こったか？場所を具体的に記述せよ。
2. いつ起こったか？出来事の時系列だけに着目し、日時は絶対に出力しない。
3. 自分は何をしたか？具体的な行動を記せ。
4. 他の人は何をしたか？関与した人物の行動を具体的に記せ。
5. 現場の物理的な状況はどうだったか？温度、湿度、照明、騒音など、具体的な特徴を記せ。    
6. 設備や道具、使用機器の状態はどうだったか？異常や特記事項があれば記せ。                
7. 天候や外部の環境条件はどうだったか？天気、風、時間帯などを具体的に記せ。
8. 具体的な数値や記録などの客観的指標は何か？
9. 期待されていた出来事との差は何か？具体的なギャップを示せ。

【回答形式】
- 各要素のtypeは必ず"adversity"を指定してください。
- descriptionは10字以内で簡潔に記述してください。

{format_instructions}

"""


belief_suggest_template = """あなたは人間の行動と失敗の分析の専門家です。
ユーザーが入力した失敗事例とその詳細について、内的要因と外的要因を分析し、それぞれ5つずつ提案してください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【失敗の詳細】
{adversity}

【分析の視点と制約】
内的要因（自己）：
- 必ず自分自身に関する要因のみを記述してください
- 以下の要素に関連する内容を含めてください：
  * 自分の性格や特性
  * 自分のスキルや能力
  * 自分の考え方や価値観
  * 自分の行動パターン
  * 自分の感情や心理状態

外的要因（環境・他者）：
- 必ず自分以外の要因のみを記述してください
- 以下の要素に関連する内容を含めてください：
  * 周囲の人々の行動や態度
  * 組織や環境の特性
  * システムや制度の問題
  * 予期せぬ出来事や状況
  * 物理的・技術的制約

【重要な注意点】
- 内的要因は自分自身に関する表現で始めてください
- 外的要因は自分以外の要因に関する表現で始めてください
- 同じような内容を異なる表現で繰り返さないでください
- 各要因は具体的で、この失敗事例に即した内容にしてください

【回答形式】
- 各要素のtypeは必ず"belief_selection"を指定してください
- descriptionは10字以内で簡潔に記述してください
- 最初の5つは内的要因、後の5つは外的要因を記述してください
- 内的要因と外的要因が明確に区別できる表現を使用してください

{format_instructions}
"""

belief_explanation_template = """あなたは人間の行動と失敗の分析の専門家です。
失敗の事例とその詳細を踏まえ、失敗の原因についての5つの異なる視点から具体的な事実を説明してください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や主観的な解釈は避け、客観的な事実の記述に徹してください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【失敗の詳細】
{adversity}

【失敗の原因】
{selected_label}

【回答形式】
- 各要素のtypeは必ず"belief_explanation"を指定してください
- 失敗の原因について、以下の3つの異なる視点から具体的な事実を説明してください：
- 説明は以下の点に注意して記述してください：
  - 各説明は15字以内で具体的に記述してください
  - 「〜かもしれない」「〜と思われる」などの推測表現は使用しない
  - 「〜べきだった」「〜が良くなかった」などの評価は含めない
  - 観察可能な事実のみを記述

{format_instructions}
"""


dispute_evidence_template = """あなたは人間の行動と失敗の分析の専門家です。
以下の失敗事例とその詳細を踏まえつつ、この失敗の原因が重要であることを支持する根拠を5つ生成してください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【失敗の詳細】
{adversity}

【原因】
{selected_label}

【根拠の型】
1. 【原因】は他の要因と比べて【観察可能な事実や証拠】という点において【失敗事例】に直接的影響を与えている
2. 【原因】は【システム的または構造的な関連性】という点において【失敗事例】との因果関係を示す
3. 【データや観察結果】を踏まえると、【原因】の解決により、【失敗事例】の再発防止が期待できる
4. 【原因】は【失敗の連鎖における位置づけ】という点で重要なレバレッジポイントとなる
5. 【原因】は【組織的または技術的側面】において根本的な問題を示している

【回答形式】
- 各要素のtypeは必ず"dispute_evidence"を指定してください
- 根拠は必ず客観的な事実や観察可能な証拠に基づいて記述してください
- 推測表現（「かもしれない」「と思われる」）は使用せず、確証のある事実のみを記述してください
- 根拠の語尾は「ので」としてください
- 5つの根拠はそれぞれ20字以内で簡潔に記述してください

{format_instructions}
"""



dispute_counter_template = """あなたは人間の行動と失敗の分析の専門家です。
以下の失敗事例とその詳細を踏まえつつ、その原因に関する説明とそれを支持する根拠を、反証する可能性について、5つ生成してください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【失敗の詳細】
{adversity}

【失敗の原因】
{selected_label}

【原因を支持する根拠】
{dispute_evidence}

【回答形式】
- 各要素のtypeは必ず"dispute_counter"を指定してください
- 失敗事例の原因と根拠を反証する可能性を記述してください
- 反証は客観的に判断してください
- 5つの反証は互いに異なる視点で記述してください
- 5つの反証はそれぞれ30字以内で簡潔に記述してください

{format_instructions}
"""

explain_template = """
以下に, ユーザーの失敗事例と偉人の失敗事例があります。ユーザーの失敗事例が偉人の失敗事例とどのように似ているかを簡潔に返答してください。

【ユーザーの失敗事例】
{user_failure}

【偉人の失敗事例】
{hero_failure}

【回答形式】
- 2つの文章の類似点のみを簡潔に返答してください
- 回答は1文で簡潔に記述してください
- 回答は敬語を使わず、平易で直接的な表現にしてください

"""

summarize_failure_template = """
以下に, ユーザーが簡潔に記述した失敗事例とその詳細があります。失敗事例の詳細を読みやすく分かりやすい文章として200字程度で要約してください。

【ユーザーが簡潔に記述した失敗事例】
{failure_text}

【失敗の詳細】
{adversity}

【回答形式】
- 失敗事例の詳細を読みやすく分かりやすい文章として再構成してください
- 各要素の本質的な内容を損なわないように注意してください
- 単なる箇条書きの言い換えは避け、要素間の関係性や文脈が分かるように記述してください

"""

summarize_reason_template = """
以下に, 失敗事例の原因に関する説明と根拠があります。失敗事例の原因に関する説明と根拠を読みやすく分かりやすい文章として200字程度で要約してください。

【原因ラベル】
{selected_label}

【原因に関する説明】
{belief_explanation}

【根拠】
{dispute_evidence}

【反対の視点】
{dispute_counter}

【回答形式】
- 失敗事例の原因に関する説明と根拠を読みやすく分かりやすい文章として再構成してください
- 各要素の本質的な内容を損なわないように注意してください
- 単なる箇条書きの言い換えは避け、要素間の関係性や文脈が分かるように記述してください

"""

summarize_all_template = """
以下に, 失敗事例の詳細と原因に関する説明があります。失敗事例の詳細と原因に関する説明を読みやすく分かりやすい文章として100字程度で要約してください。
詳細と原因以外には触れないでください。

【失敗事例の詳細】
{summarized_failure}

【原因に関する説明】
{summarized_reason}

"""
