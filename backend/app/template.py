adversity_template = """あなたは人間の行動と失敗の分析の専門家です。
ユーザーが入力した失敗事例について、以下の質問に短く答えてください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【質問】
1. どこで、いつ起こった？場所や時間、状況を明示して。
2. 自分は何をした？具体的な行動を記して。
3. 他の人は何をした？その行動や関与を記して。
4. その他、客観的な情報や詳細はあるか？

【回答形式】
- 各要素のtypeは必ず"adversity"を指定してください
- descriptionは質問への回答を1-2行で簡潔に記述してください

{format_instructions}
"""

dispute_template = """あなたは人間の行動と失敗の分析の専門家です。
直前のフェーズで整理された「信念」の内容をもとに、以下の質問に端的に答えてください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に、実際の事実や自分自身の認識に基づいて答えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【前のステップで整理された信念】
{text}

【質問】
1. この信念が正しいと感じる要因は何か？具体的な事実や自分自身の認識を挙げて。
2. この信念に反する証拠や事実はないか？具体的な事実から客観的に判断して。
3. この信念の裏にある隠れた前提や思い込みは何か？客観的に判断して。
4. この信念の裏にある隠れた前提や思い込みは何か？もうひとつの見方を挙げて。
5. もしこの信念を別の視点に置き換えるとしたら、どんな考え方が適切か？
6. もしこの信念を別の視点に置き換えるとしたら、どんな考え方が適切か？もうひとつの見方を挙げて。

【回答形式】
- 各要素のtypeは必ず"disputation"としてください。
- descriptionは各質問への回答を1～2行で簡潔に記述してください。

{format_instructions}
"""

summary_template = """あなたは複数の要素を自然な文章へとつなげる専門家です。
以下の要素を、読みやすく分かりやすい文章として再構成してください。
各要素の関連性を考慮し、論理的な流れのある文章としてまとめてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【入力タイプ】
{analysis_type}

【要素一覧】
{elements_text}

【回答形式】
- 要素一覧を有機的につなげ、一連の流れのある文章として記述してください
- 各要素の本質的な内容を損なわないように注意してください
- 単なる箇条書きの言い換えは避け、要素間の関係性や文脈が分かるように記述してください
- 文章は2-3文程度で簡潔にまとめてください

{format_instructions}
"""

belief_suggest_template = """あなたは人間の行動と失敗の分析の専門家です。
ユーザーが入力した失敗事例について、内的要因と外的要因を分析し、それぞれ5つずつ提案してください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【分析の視点と制約】
内的要因（自己）：
- 必ず自分自身に関する要因のみを記述してください
- 以下の要素に関連する内容を含めてください：
  * 自分の性格や特性
  * 自分のスキルや能力
  * 自分の考え方や価値観
  * 自分の行動パターン
  * 自分の感情や心理状態

外的要因（環境・他者）：
- 必ず自分以外の要因のみを記述してください
- 以下の要素に関連する内容を含めてください：
  * 周囲の人々の行動や態度
  * 組織や環境の特性
  * システムや制度の問題
  * 予期せぬ出来事や状況
  * 物理的・技術的制約

【重要な注意点】
- 内的要因は必ず「自分の」「自身の」などの一人称で始めてください
- 外的要因は必ず環境や他者に関する表現で始めてください
- 同じような内容を異なる表現で繰り返さないでください
- 各要因は具体的で、この失敗事例に即した内容にしてください

【回答形式】
- 各要素のtypeは必ず"belief"を指定してください
- descriptionは10字以内で簡潔に記述してください
- 最初の5つは内的要因、後の5つは外的要因を記述してください
- 内的要因と外的要因が明確に区別できる表現を使用してください

{format_instructions}
"""

belief_explanation_template = """あなたは人間の行動と失敗の分析の専門家です。
選択された各原因について、より詳細な説明を生成してください。
回答は後述のPydanticスキーマに従い、JSON形式で出力してください。
推測や創作は最小限に抑えてください。
出力は敬語を使わず、平易で直接的な表現にしてください。

【失敗事例】
{text}

【選択された原因】
{selected_labels}

【回答形式】
- 各要素のtypeは必ず"belief"を指定してください
- 各原因について、以下の3点を含めて説明してください：
  1. この原因が失敗事例とどのように関連しているか
  2. なぜこの原因が重要な要因として考えられるか
  3. この原因が失敗にどのように影響を与えたか
- 説明は1-2文で具体的に記述してください
- 出力は必ずスキーマに従ったJSON形式で行ってください
- labelsは必ず配列（リスト）として出力してください

{format_instructions}
"""
